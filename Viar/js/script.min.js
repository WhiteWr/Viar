"use strict";const spollersArray=document.querySelectorAll("[data-spollers]");if(spollersArray.length>0){const e=Array.from(spollersArray).filter((function(e,t,s){return!e.dataset.spollers.split(",")[0]}));e.length>0&&initSpollers(e);const t=Array.from(spollersArray).filter((function(e,t,s){return e.dataset.spollers.split(",")[0]}));if(t.length>0){const e=[];t.forEach(t=>{const s={},o=t.dataset.spollers.split(",");s.value=o[0],s.type=o[1]?o[1].trim():"max",s.item=t,e.push(s)});let s=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));s=s.filter((function(e,t,s){return s.indexOf(e)===t})),s.forEach(t=>{const s=t.split(","),o=s[1],n=s[2],r=window.matchMedia(s[0]),i=e.filter((function(e){if(e.value===o&&e.type===n)return!0}));r.addListener((function(){initSpollers(i,r)})),initSpollers(i,r)})}function initSpollers(e,t=!1){e.forEach(e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),initSpollersBody(e),e.addEventListener("click",setSpollerAction)):(e.classList.remove("_init"),initSpollersBody(e,!1),e.removeEventListener("click",setSpollerAction))})}function initSpollersBody(e,t=!0){const s=e.querySelectorAll("[data-spoller]");s.length>0&&s.forEach(e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})}function setSpollerAction(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const s=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),o=s.closest("[data-spollers]"),n=!!o.hasAttribute("data-one-spoller");o.querySelectorAll("._slide").length||(n&&!s.classList.contains("_active")&&hideSpollerBody(o),s.classList.toggle("_active"),_slideToggle(s.nextElementSibling,500)),e.preventDefault()}}function hideSpollerBody(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),_slideUp(t.nextElementSibling,500))}}let _slideUp=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t))},_slideDown=(e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let s=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=s+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)}},_slideToggle=(e,t=500)=>e.hidden?_slideDown(e,t):_slideUp(e,t),isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function textWebp(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)}}textWebp((function(e){1==e&&document.querySelector("body").classList.add("webp")}));const urlServer="http://localhost:3000",saleUrl="json/sale.json",artsUrl="json/arts.json",headers={"Content-Type":"application/json"};window.onload=function(){function e(){const e=document.querySelectorAll(".item-arts__image");e.length>0&&e.forEach(e=>{e.querySelector("img").naturalWidth<e.querySelector("img").naturalHeight&&e.classList.add("_vertical")})}function t(){document.querySelectorAll("li.forms-sale__item input[type = radio]").forEach(e=>{if(e.hasAttribute("checked"))return e.parentElement.classList.add("_active"),e.parentElement;!e.hasAttribute("checked")&&e.parentElement.classList.contains("_active")&&e.parentElement.classList.remove("_active")})}function s(){window.innerWidth;const e=document.forms.saleForm,t=document.querySelectorAll(".forms-sale__list"),s=52*e.querySelectorAll(".forms-sale__item").length/2;t.forEach(e=>{e.style.maxHeight=s,e.style.transform=null}),window.innerWidth<992&&t.forEach(e=>{e.style.transform="translate(-25%)"}),window.innerWidth<530&&t.forEach(e=>{e.style.maxHeight=null,e.style.transform=null})}function o(){const e=document.querySelector("[data-step]").getAttribute("data-step"),t=document.querySelectorAll("[data-stepId]"),s=t[t.length-1].getAttribute("data-stepId");t.forEach(t=>{if(t.classList.contains("_active")?t.classList.remove("_active"):t.classList.contains("_view")&&t.classList.remove("_view"),t.classList.contains("_next")?t.classList.remove("_next"):t.classList.contains("_prev")&&t.classList.remove("_prev"),t.getAttribute("data-stepId")==e&&t.classList.add("_active"),t.getAttribute("data-stepId")-1==e&&!t.classList.contains("forms-sale__qustion")&&t.classList.add("_view"),t.getAttribute("data-stepId")==s&&s==e&&!t.classList.contains("forms-sale__qustion")){const e=document.querySelector(`[data-stepId = "${s-1}"]`);e.classList.add("_view"),e.classList.contains("_prev")&&e.classList.remove("_prev")}t.getAttribute("data-stepId")>e&&!t.classList.contains("_view")&&t.classList.add("_next"),t.getAttribute("data-stepId")<e&&t.classList.add("_prev")});const o=document.querySelector("[data-step]"),n=`<span data-step="${e}">${e}</span>`;o.insertAdjacentHTML("afterend",n),o.remove()}document.addEventListener("click",(function(s){const n=s.target;if(window.innerWidth>=768&&isMobile.any()&&(n.classList.contains("menu__arrow")&&n.closest(".menu__item").classList.toggle("_hover"),!n.closest(".menu__item")&&document.querySelectorAll(".menu__item._hover").length>0)){document.querySelectorAll(".menu__item._hover").forEach(e=>{e.removeClass("_hover")})}if(n.closest(".menu__icon")){const e=document.querySelector(".menu__icon"),t=document.querySelector(".icon-menu__container"),s=document.querySelector(".menu");document.body.classList.toggle("_lock"),e.classList.toggle("_active"),s.classList.toggle("_active"),t.classList.toggle("_active"),function(){const e=document.querySelector(".menu"),t=document.querySelector(".contacts-menu"),s=document.querySelector(".menu__menu-hold");window.innerWidth>=768&&e.closest("._active")&&(s.insertBefore(t,s.children[0]),s.insertBefore(menuLeng,s.children[1]))}()}if(n.closest(".lang-menu__visible")&&!document.querySelector(".lang-menu__visible").classList.contains("_hold"))document.querySelector(".lang-menu__visible").classList.add("_hold"),document.querySelectorAll(".lang-menu__option").forEach(e=>{e.classList.contains("_active")&&e.classList.remove("_active"),e.style.transform="translate(0, 0)"});else if(n.closest(".lang-menu__option")&&document.querySelector(".lang-menu__visible").classList.contains("_hold")){const e=n.getAttribute("data-value");document.querySelector(".lang-menu__select").setAttribute("value",e);const t=document.querySelectorAll(".lang-menu__option"),s=Array.from(t).findIndex((e,t,s)=>e==n?t:null),o=t.length;-1!=s&&(n.style.transform=`translate(0, -${100*(o-1)}%)`),n.classList.add("_active"),document.querySelector(".lang-menu__visible").classList.remove("_hold")}if(n.closest(".forms-sale__item")){const e=n.querySelector("input"),s=document.querySelector(".forms-sale__qustion._active");s.querySelectorAll("li.forms-sale__item input[type = radio]").forEach(e=>{e.hasAttribute("checked")&&(e.removeAttribute("checked"),e.parentElement.classList.remove("_active"))}),e.setAttribute("checked",""),t()}if(n.closest(".forms-sale__button")&&!n.closest(".forms-sale__button_prev")&&!n.closest(".forms-sale__button_send")){const e=document.querySelector("[data-step]").getAttribute("data-step");document.querySelector("[data-step]").setAttribute("data-step",Number(e)+1);document.querySelectorAll("[data-stepId]"),new Promise((e,t)=>{setTimeout(()=>{o(),e()},100)})}if(n.closest(".forms-sale__button_prev")){const e=document.querySelector("[data-step]").getAttribute("data-step");document.querySelector("[data-step]").setAttribute("data-step",Number(e)-1);document.querySelectorAll("[data-stepId]"),new Promise((e,t)=>{setTimeout(()=>{o(),e()},100)})}n.closest(".forms-sale__button_send")&&(!async function(){const e=document.querySelectorAll('[name="saleForm"]'),t=[];e.forEach(e=>{t.push(e.querySelector("input[checked]").value)});let s=await fetch(urlServer,{method:"POST",headers:headers,body:t});s.ok?alert("Request is enter"):alert("Error "+s.status)}(),s.preventDefault());n.closest(".forms-contact-us__button")&&(!async function(){const e=document.forms.contactUsForm,t=e.querySelector('input[type="file"]').value,s=e.querySelector('input[type="email"]').value,o=e.querySelector('input[type="tel"]').value;let n={file:t,email:s,phone:o},r=await fetch(urlServer,{method:"POST",headers:headers,body:n});r.ok?alert("Request is enter"):alert("Error "+r.status)}(),s.preventDefault());n.classList.contains("arts__showMore")&&(!async function(t){if(!t.classList.contains("_hold")){t.classList.add("_hold"),t.setAttribute("disabled","");let s=await fetch(artsUrl,{method:"GET",headers:headers});if(s.ok){!function(t){const s=document.querySelector("._end");t.arts.forEach(e=>{e.id;const t=e.url,o=e.title,n=e.image;var r=`\n\t\t\t\t<article class="arts__item item-arts">\n               <h3 class="item-arts__title">${o}</h3>\n               <div class="item-arts__body">\n                  <a href="${t}" class="item-arts__image">\n                     <picture>\n                        <source srcset="img/arts/${n}.webp" type="image/webp">\n                        <img src="img/arts/${n}.png" alt="#">\n                     </picture>\n                  </a>\n               </div>\n               <div class="item-arts__text">${e.text}</div>\n               <div class="item-arts__price">от <span>${e.price}</span></div>\n               <button type="button" class="item-arts__buy btn">Заказать</button>\n            </article>\n         `;s.insertAdjacentHTML("afterend",r)}),e()}(await s.json()),t.classList.remove("_hold"),t.remove()}else alert("Error")}}(n),s.preventDefault())})),document.querySelector(".menu__list").addEventListener("mouseout",e=>{const t=e.target;t.closest(".menu__item")&&(t.setAttribute("disabled",""),setTimeout(()=>{t.removeAttribute("disabled")},350))}),function(){const e=document.forms.contactUsForm,t=e.contactUsInput,s=e.contactUsPhoto;t.forEach(e=>{const t=e.getAttribute("placeholder");e.addEventListener("focus",(function(t){e.setAttribute("placeholder",""),e.parentElement.classList.add("_focus")})),e.addEventListener("blur",(function(s){e.setAttribute("placeholder",t),e.value||e.parentElement.classList.remove("_focus")}))}),s.addEventListener("change",()=>{if(s.value.length>35){let o="",n="";for(var t=0;t<s.value.length;t++){let e=String(s.value[t]);if("\\"===e&&(o=String(s.value[t+1])+String(s.value[t+2])+String(s.value[t+3])),"."===e){let o=String(s.value).split(e);n=String(s.value[t-2])+String(s.value[t-1])+e+o[1]}}let r=String(s.value).split(o)[0]+o+"..."+n;e.querySelector(".forms-contact-us__title_photo").innerHTML=`<div class="forms-contact-us__title_photo">Загружено фото <span>${r}</span></div>`}else e.querySelector(".forms-contact-us__title_photo").innerHTML=`<div class="forms-contact-us__title_photo">Загружено фото <span>${s.value}</span></div>`})}(),e(),async function(){await async function(e){const n=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(n.ok){return function(e){const n=document.querySelector(".forms-sale__body");let r=0;const i=e[e.length-1].id;return e.forEach(e=>{const t=e.id,s=e.title,o=e.values;let l=0,a="",c="",d="";r>0&&(c='\n            <button type="button" class="forms-sale__button forms-sale__button_prev _icon-angle-down btn">Предыдущий шаг</button>\n            ',d='\n            style="width: 180px;"\n            '),o.forEach(e=>{let t="";0==l&&(t="checked"),a+=`\n            <li class="forms-sale__item"><input type="radio" ${t} name="radioSale" value="${l}" class="forms-sale__radio">${e}</li>\n            `,l++});let u=`<button type="button" class="forms-sale__button _icon-angle-down btn" ${d}>Следующий шаг</button>`;i==t&&(u=`<button type="button" class="forms-sale__button forms-sale__button_send _icon-angle-down btn" ${d}>Отправить</button>`);let m=`\n         <div data-stepId="${t}" class="forms-sale__qustion">\n            <div class="forms-sale__title">${s}</div>\n            <form action="#" name="saleForm" class="forms-sale__form">\n               <ul class="forms-sale__list">\n                  ${a}\n               </ul>\n            </form>\n            <div class="forms-sale__box-button">\n               ${c}\n               ${u}\n            </div>\n         </div>\n         `;r++,n.insertAdjacentHTML("beforeend",m)}),o(),t(),s(),!0}(await n.json())}}(saleUrl)&&window.addEventListener("resize",()=>{s()})}()};